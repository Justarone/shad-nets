## Структура проекта

есть 3 вспомогательных баш-скрипта:
* setup.sh - настроить окружение
* cleanup.sh - снести окружение
* run.sh - запустить mtr

при установке себе, можно запустить setup.sh и run.sh и заработает на конфигурации по умолчанию

вся лабораторная ввиду небольшого размера состоит из 1 файла -- `__main__.py`

## Принципы работы и нетривиальные моменты

алгоритм делает опрос порциями, с некоторым таймаутом. практика показала, что если запрашивать большие порции, то будет много неответов, поэтому в какой-то момент я переделал скрипт таким образом, чтобы он запрашивал данные порциями (по 20 endpoint'ов) с таймаутом в 3 секунды и 3 ретраями. я тестировался на своей виртуалки, зная, что как минимум порты 22, 80 и 443 у меня на ней открыты, когда я их не получал, я делал "проще настройки сканирования".

ретраи происходят только для тех пакетов, на которые не вернулся ответ (такое может быть - наш SYN пакет потерялся, потерялся SYN-ACK пакет и тд).

после всех ретраев логгируется число endpoint'ов, от которых ответа не последовало вовсе. оставшиеся ответы анализируются.

если были получены флаги SA, то все хорошо и считаем порт доступным, в противном случае (чаще всего RA, другое не встречал) порт считаем закрытым ([пс](https://stackoverflow.com/questions/5272026/tcp-server-sends-rst-ack-immediately-after-receiving-syn-from-client)). полученное число не SA ответов логгируется. для SA логгируем доступные ip-адрес и порт.

## Результаты запуска

команда (`bash run.sh`):
```
sudo ./scapy_venv/bin/python3 __main__.py -a "51.250.16.179/30" -p "20-80" 1>/dev/null
```

результат:
```
after attempt [1]: 185/244
after attempt [2]: 185/244
after attempt [3]: 185/244
unanswered in 1 seconds and 3 attempts: 59
not SA flags count: 178
available endpoints: 51.250.16.176:22, 51.250.16.177:22, 51.250.16.177:80, 51.250.16.178:22, 51.250.16.178:80, 51.250.16.179:22, 51.250.16.179:80
```
